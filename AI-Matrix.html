<html>

<head>
  <script src="AI-Mat.js" type="text/javascript"></script>
  
  <script type="text/javascript">
    /*****************************************************************************************
    If user decides to load the external Float number library with the matrix.
    Or if user wants an debug view of the Matrix.
    *****************************************************************************************/

    function Setup() { document.getElementById("LoadFL").checked = false; document.getElementById("CDebug").checked = false; }

    var head = document.getElementsByTagName("head")[0];

    var script1 = document.createElement("script"), script2, script3;

    /*****************************************************************************************
    The double precision library is not mandatory, but is an nice enhancement to the Matrix.
    *****************************************************************************************/

    script1.type = "text/javascript"; script1.src = "https://rawgit.com/Recoskie/Fl64/38caf1e043f7da1137bb12a05d08e10c60a4bd37/FL64.js"; 

    script1.onload = function() { document.getElementById("Load").innerHTML = ""; alert("loaded!"); };

    script1.onerror = function() { document.getElementById("LoadFL").checked = false; alert("Error Unable to load FL 64..."); };
	
    function LoadFL64() { head.appendChild( script1 ); }

    /*****************************************************************************************
    Load the debugged or reload the non debugged Matrix.
    *****************************************************************************************/

    function LoadDebug( sw )
    {
      if( sw )
      {
        var script3 = document.createElement("script");

        script3.type = "text/javascript"; script3.src = "AI-MatD.js";

        try { head.removeChild( script2 ); } catch( e ) { };

        script3.onload = function() { document.getElementById("Debug").innerHTML = "Enabled"; alert("loaded!"); };

        script3.onerror = function() { document.getElementById("Debug").innerHTML = "Disabled"; document.getElementById("CDebug").checked = false; alert("Error Unable to load AI-Mat-Debug..."); };

        head.appendChild( script3 );
      }
      else
      {
        var script2 = document.createElement("script");

        script2.type = "text/javascript"; script2.src = "AI-Mat.js";

        try { head.removeChild( script3 ); } catch( e ) { };

        script2.onload = function() { document.getElementById("Debug").innerHTML = "Disabled"; alert("loaded!"); };

        script2.onerror = function() { document.getElementById("Debug").innerHTML = "Enabled";  document.getElementById("CDebug").checked = true; alert("Error Unable to load AI-Mat..."); };

        head.appendChild( script2 );
      }
    }

    /*****************************************************************************************
    Information on external libraries and what they do.
    *****************************************************************************************/

    function FL64Info()
    {
      var w = window.open("", "_blank", "toolbar=0,location=0,menubar=0");

      w.document.body.innerHTML = "No information yet.";
    }

    function DebugInfo()
    {
      var w = window.open("", "_blank", "toolbar=0,location=0,menubar=0");

      w.document.body.innerHTML = "The Debug version of the AI mat has an \"AI_Mat.debug\" value which is written to in HTML showing each step the matrix does.<br />\
        The matrix can solve all sums in all dimensions or logarithmic values.<br />\
        The debug value in the AI matix is read and then displayed along with the results.<br />\
        However the extra work involved as running slows down the AI solving abilities so one has the debug value and the other does not.<br /><br />\
        The debug version is still in the makings.";
    }

    /*****************************************************************************************
    Solve data.
    *****************************************************************************************/

    function Solve( Mode )
    {
      var input = [], b = [];

      var out = "<center>";

      //Create an new set of data.

      try { input = new Set( document.getElementById("Data").value ); b = new Set( input ); } catch( e )
      { 
        window.frames[0].document.body.innerHTML = out + "<h1>Error input not allowed</h1>separate each number by an comma<br /><br /><br />Example use:<br /><br /><br />10,<br />20,<br />30<br /><br /><br />If you decide to add another number it should look like this<br /><br /><br />10,<br />20,<br />30,<br />40<br /><br /><br />The only data that should be typed in before solving the data is just the numbers and commas that separate each number<br /><br /><br />No words or any letters are allowed yet. Only numbers are allowed, and after each number you put an comma except for the last number you enter in the text input.<br /><br /><br />After entering the number data click one of the solve buttons.<br /><br /><br />Enter the Number Data in the text input below and type the numbers in the correct format.";
        return;
      }

      out += "<h1>Given data from function, or observed measurements.</h1><br />" + ( input + "" ).replace(/\r\n/g,"<br />");

      //Analyze data.

      var d = Mode === 2 ? input.gen() : Mode === 0 ? input.seq() : input.geo();

      out += "<h1>Sequence data.</h1><br />" + ( d.seq + "" ).replace(/\r\n/g,"<br />");

      out += "<h1>Geo Sequence data.</h1><br />" + ( d.geo + "" ).replace(/\r\n/g,"<br />");

      out += "<h1>ASCII Math String.</h1><br />" + d + "" );

      var f = d.getFunc();

      out += "<h1>Compiled to an function.</h1><br /><table><tr><td>" + ( ( f + "" ).replace(/ /g,"&nbsp;") ).replace(/\r\n/g,"<br />") + "</td></tr></table>";

      out += "<h1>Running Math function -" + ( input.length + 5 ) + " to " + ( input.length + 5 ) + ".</h1><br />";

      out += "<table border=\"1\"><tr><td><center>X</center></td><td><center>result</center></td><td><center>Your Input</center></td></tr>";

      for ( var i = -( b.length + 5 ); i <= b.length + 5; i++ )
      {
        out += "<tr><td><center>" + i + "</center></td><td><center>" + f( i ) + "</center></td><td><center>" + b [ Mode === 1 ? i - 1 : i  ] + "</center></td></tr>";
      }

      out += "</table></center>";

      //Update output.

      window.frames[0].document.body.innerHTML = out;
    }
  </script>
  
</head>

<body background="Bg/bg.jpg" text="#FFFFFF" onload="Setup();">
  <table height="100%" width="100%">

    <tr>
      <td height="1px;">
        <center>
          <h1>By Damian Recoskie</h1>
          <hr />
          <table>
            <tr>
              <td><div id = "Load">Load FL64:<input id="LoadFL" type="checkbox" onclick="LoadFL64( this.checked );" checked="false" /><input type="button" onclick="FL64Info();" value="What is FL64?" /></div></td>
              <td>Debug Mode:</td> <td><div id = "Debug">Disabled</div></td><td><input id="CDebug" type="checkbox" onclick="LoadDebug( this.checked );" checked="false" /><input type="button" onclick="DebugInfo();" value="What is Debug Mode?" /></td>
            </tr>
          </table>
        </center>
      </td>
    </tr>

    <tr>
      <td height="100%">
        <img src="Bg/bg2.gif" style="max-height:30%;width:auto;position:absolute;left:50%;transform:translate(-50%, 20%);z-index:-1;">
        <iframe id="d" width="100%" height="100%" src="javascript:(function(){document.write('<body text=\'#FFFFFF\'><center>Each number in an set is separated by an comma.<br /><br /><br />Example use:<br /><br /><br />10,20,30<br /><br /><br />If you decide to add another number it should look like this.<br /><br /><br />10,20,30,40<br /><br /><br />The only format that is supported is just numbers separated by commas. No words or any letters yet.<br /><br /><br />After you enter the number data click one of the solve buttons.</center><script>window.stop();</script></body>'); })()"></iframe>
      </td>
    </tr>

    <tr>
      <td>

        <table style="height:100%;">
          <tr>
            <td width="100%">
              <textarea style="width:100%;height:100%;background:rgba(255,255,255,0.3);font-size:200%;resize:none;" onclick="this.value='';this.onclick=''" id="Data">Enter Numbers here.</textarea>
            </td>

            <td>
              <center>

                <input type="image" src="Buttons/sum.gif" onmousedown="this.src='Buttons/sum_pressed.gif'" onmouseup="this.src='Buttons/sum.gif'" onclick="Solve(0)" />

                <input type="image" src="Buttons/geo-sum.gif" onmousedown="this.src='Buttons/geo-sum_pressed.gif'" onmouseup="this.src='Buttons/geo-sum.gif'" onclick="Solve(2)" />

                <input type="image" src="Buttons/geo.gif" onmousedown="this.src='Buttons/geo_pressed.gif'" onmouseup="this.src='Buttons/geo.gif'" onclick="Solve(1)" />

              </center>
            </td>
          </tr>
        </table>

      </td>
    </tr>

  </table>

</body>
</html>
